#compdef fun

local context state state_descr line
typeset -A opt_args

_arguments -A '-*' \
  '-l[configure local dotfiles]:local:->local' \
  '-c[configure autocompletion]:completion:->completion'

directory="dotfiles"
mode="functions"

for option (${(k)opt_args}); do
  case "$option" in
    -l) directory="dotfiles-local" ;;
    -c) mode="completion" ;;
  esac
done

_files -W "$HOME/$directory/zsh/$mode"
